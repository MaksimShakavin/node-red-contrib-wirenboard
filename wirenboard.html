<!--
//
//     Copyright (C) 2018  Andrey Popov
//
//     This program is free software: you can redistribute it and/or modify
//     it under the terms of the GNU General Public License as published by
//     the Free Software Foundation, either version 3 of the License, or
//     (at your option) any later version.
//
//     This program is distributed in the hope that it will be useful,
//     but WITHOUT ANY WARRANTY; without even the implied warranty of
//     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
//     GNU General Public License for more details.
//
//     You should have received a copy of the GNU General Public License
//     along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<script type='text/javascript'>
    $.getScript('wirenboard/static/js/bootstrap-multiselect.js');
    $.getScript('wirenboard/static/js/node-red-contrib-wirenboard-in.js');
    $.getScript('wirenboard/static/js/node-red-contrib-wirenboard-out.js');
    $.getScript('wirenboard/static/js/node-red-contrib-wirenboard-get.js');
    $.getScript('wirenboard/static/js/node-red-contrib-wirenboard-server.js');
    $.getScript('wirenboard/static/js/node-red-contrib-wirenboard-helpers.js');
</script>





<!-- *************** Input Node *************** -->
<script type="text/x-red" data-template-name="wb-input">
    <link rel="stylesheet" href="wirenboard/static/css/bootstrap-multiselect.css" type="text/css" />
    <link rel="stylesheet" href="wirenboard/static/css/multiselect.css" type="text/css" />
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-filter"><i class="fa fa-crosshairs"></i> Channel</label>
        <select id="node-input-filter">
        </select>
    </div>
    <div class="form-row">
        <label for="force-refresh"><i class="fa fa-refresh"></i> Refresh</label>
        <button type="button" style="width: 70%" class="btn btn-light" id="force-refresh" name="force-refresh">Refresh channels list</button>
	</div>
</script>

<script type="text/x-red" data-help-name="wb-input">
    <p>This node listens for mqtt messages sent from your wirenboard.</p>
    <b>Configuration</b><br>
    <ul>
        <li><b>Name:</b> Choose any name to identify your node.</li>
        <li><b>Server:</b> Choose the wirenboard server instance to use.</li>
        <li><b>Channel:</b> Select channel to listen to.</li>
    </ul>
    <b>Output</b><br>
    <ul>
        <li>The <code>msg.payload</code> contains message</li>
    </ul>
    <b>Status</b><br>
    <ul>
        <li>The node indicates the connection status to wirenboard via a status indicator.</li>
    </ul>
</script>







<script type="text/x-red" data-template-name="wb-get">
   <link rel="stylesheet" href="wirenboard/static/css/bootstrap-multiselect.css" type="text/css" />
   <link rel="stylesheet" href="wirenboard/static/css/multiselect.css" type="text/css" />

   <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-filter"><i class="fa fa-crosshairs"></i> Channel</label>
        <select id="node-input-filter">
        </select>
    </div>
    <div class="form-row">
        <label for="force-refresh"><i class="fa fa-refresh"></i> Refresh</label>
        <button type="button" style="width: 70%" class="btn btn-light" id="force-refresh" name="force-refresh">Refresh channels list</button>
	</div>
</script>

<script type="text/x-red" data-help-name="wb-get">
    <p>This reads mqtt message from defined channel.</p>
    <b>Configuration</b><br>
    <ul>
        <li><b>Name:</b> Choose any name to identify your node.</li>
        <li><b>Server:</b> Choose the wirenboard server instance to use.</li>
        <li><b>Channel:</b> Select channel to listen to.</li>
    </ul>
    <b>Output</b><br>
    <ul>
        <li>The <code>msg.payload</code> contains message</li>
    </ul>
    <b>Status</b><br>
    <ul>
        <li>The node indicates the connection status to wirenboard via a status indicator.</li>
    </ul>
</script>







<!-- *************** Output Node *************** -->
<script type="text/x-red" data-template-name="wb-output">
    <link rel="stylesheet" href="wirenboard/static/css/bootstrap-multiselect.css" type="text/css" />
    <link rel="stylesheet" href="wirenboard/static/css/multiselect.css" type="text/css" />

    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-server"><i class="fa fa-globe"></i> Server</label>
        <input type="text" id="node-input-server">
    </div>
    <div class="form-row">
        <label for="node-input-filter"><i class="fa fa-crosshairs"></i> Channel</label>
        <select id="node-input-filter">
        </select>
    </div>
    <div class="form-row">
        <label for="force-refresh"><i class="fa fa-refresh"></i> Refresh</label>
        <button type="button" style="width: 70%" class="btn btn-light" id="force-refresh" name="force-refresh">Refresh channels list</button>
	</div>
    <div class="form-row">
        <label for="node-input-command"><i class="fa fa-tasks"></i> Command</label>
        <input type="text" id="node-input-command" style="width:70%">
        <input type="hidden" id="node-input-commandType">
    </div>
	<div class="form-row">
        <label for="node-input-payload"><i class="fa fa-envelope"></i> Payload</label>
        <input type="text" id="node-input-payload" style="width:70%">
        <input type="hidden" id="node-input-payloadType">
    </div>
</script>

<script type="text/x-red" data-help-name="wb-output">
    <p>This node sends mqtt message to channel.</p>
    <b>Configuration</b><br>
    <ul>
        <li><b>Name:</b> Choose any name to identify your node.</li>
        <li><b>Server:</b> Choose the wirenboard server instance to use.</li>
        <li><b>Channel:</b> Select the channel to send your message.</li>
    </ul>
    <b>Input</b><br>
    <ul>
        <li>The <code>msg.payload</code> of your message is used as message.</li>
    </ul>
</script>







<!-- *************** Server Node *************** -->
<script type="text/x-red" data-template-name="wb-server">
    <div class="form-row">
        <label for="node-config-input-name"><i class="icon-bookmark"></i> Name</label>
        <input type="text" id="node-config-input-name">
    </div>
    <div class="form-row">
        <label for="node-config-input-url"><i class="icon-bookmark"></i> IP-address</label>
        <input type="text" id="node-config-input-url">
    </div>
    <div class="form-row">
        <label for="node-config-input-allowuntrusted"><i class="icon-tag"></i> SSL</label>
        <input type="checkbox" id="node-config-input-allowuntrusted" style="display: inline-block; width: auto; vertical-align: top;"> Do not validate SSL Server Certificate</input>
    </div>
    <div class="form-row">
        IMPORTANT: <b>deploy</b> server configuration to get Channels List.
    </div>
</script>

<script type="text/x-red" data-help-name="wb-server">
    <b>Configuration</b><br>
    Important: <b>deploy</b> server configuration to get Channels List.
    <ul>
        <li><b>Name:</b> Choose any name to identify your server.</li>
        <li><b>IP:</b> IP-address of your wirenboard instance. Example: <code>127.0.0.1</code> or <code>192.168.1.100</code></li>
        <li><b>SSL:</b> Activate to disable SSL Certificate validation. e.g. for using a self signed certificate</li>
    </ul>
</script>



